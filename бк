  
        connection.query("SELECT * FROM clients_data WHERE client_id='"+this.client_id+"' AND question_id='"+last_step.id+"'", function(err, results) {
          if (results.length>0)
          {
    
          }
          else
          {
            this.connection.query("INSERT INTO clients_data (client_id,question_id,answer) VALUE ('"+this.client_id+"','"+last_step.id+"','"+message+"')", function(err, data) {
            })
          }
      });


      
















        this.connection.query("SELECT question FROM questions WHERE id=('"+this.step+"')", function(err, baseresults) {
            console.log(baseresults)
          })
  
  
          connection.query("INSERT INTO clients_data (client_id,question_id,answer) (SELECT chatid,questions.id,'"+message+"' FROM clients,questions)", function(err, results) {
            console.log(err)
            console.log(results)
          })
    
  
          connection.query("INSERT INTO clients_data (answer) VALUE ('"+message+"')", function(err, results) {
            console.log(err)
            console.log(results)
          })
    
  
  
  
  connection.query("SELECT * FROM clients WHERE chatid="+user_id, function(err, results) {
        if(err) console.log(err);
        if (results.length>0)
        {
          connection.query("SELECT * FROM clients_data WHERE client_id="+results[0]['id'], function(err, anketa) {
            let users_data={}
            anketa.forEach((item)=>{
              users_data[item.label]=item.value
            })
            _this.anketa.init(users_data,results[0]['id'])
            
          })
        }
        else
        {
          connection.query("INSERT INTO clients (chatid) VALUES ('"+user_id+"')", function(err, results) {

            console.log(err)
          })
        }
    });







    connection.query("SELECT * FROM clients WHERE chatid="+user_id, function(err, results) {
        if(err) console.log(err);
        if (results.length>0)
        {
          connection.query("SELECT * FROM clients_data WHERE client_id="+results[0]['id'], function(err, anketa) {
            let users_data={}
            anketa.forEach((item)=>{
              users_data[item.label]=item.value
            })
            _this.anketa.init(users_data,results[0]['id'])
            
          })
        }
        else
        {
          connection.query("INSERT INTO clients (chatid,name) VALUES ('"+user_id+"','"+first_name+"')", function(err, results) {
  
            console.log(err)
          })
        }
    });






    this.base=[
        {
            question:"1?",
            anketaopts:{parse_mode: 'html'},
            type:"age",
            error:"Вам должно быть больше 18 лет!"
        },
        {
            question:"<i>Вопрос 2/4 \nВыберите регион Вашего проживания:</i>",
            anketaopts:{parse_mode: 'html'},
            type:"string",
            error:"Регион введен некорректно"
        },
        {
          question:"<i>Вопрос 3/4 \nКакая у вас кредитная история? \n\n<b>Хорошая кредитная история</b> - выберите этот вариант, если за последний месяц у вас не было просрочек по платежам, нет или мало активных кредитов (займов) и количество отказов по кредитам (займам) минимально. \n<b>Плохая кредитная история</b> - выберите этот вариант, если у вас были просрочки по займам (кредитам) за последнее время, есть несколько активных задолженностей, большое количество отказов. \n\n(Сейчас бот реагирует только на кнопки под этим сообщением)</i>",
          anketaopts:{
            reply_markup: {
                inline_keyboard: [
                  [
                    {
                      text: 'Положительная', 
                      callback_data: 'k51' 
                    }
                  ],
                  [
                      {
                        text: 'Отрицательная',
                        callback_data: 'k52'
                      }
                  ],
                 ]},
                 parse_mode: 'html'
        },
        type:"history",
        error:"Необходимо выбрать один вариант из предложенных"
        },
        {
          question:"<i>Вопрос 4/4 \n Количество активных займов более 5?</i>",
          anketaopts:{
            reply_markup: {
              inline_keyboard: [
                [
                  {
                    text: 'ДА', 
                    callback_data: 'k61' 
                  }
                ],
                [
                    {
                      text: 'НЕТ',
                      callback_data: 'k62'
                    }
                ],
               ]},
               parse_mode: 'html'
          },
          type:"amount",
          error:"Необходимо выбрать один вариант из предложенных"
      },
        {
            question:"<i>Спасибо, Ваши данные успешно сохранены.</i>",
            anketaopts:{parse_mode: 'html'},
            type:"null"
        }
    ]